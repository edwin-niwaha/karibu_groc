doctype html
html(lang='en-US')
  head
    title Karibu Groceries | Dashboard
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(http-equiv='content-type' content='text/html;charset=utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1')
    link(rel='shortcut icon' href='/assets/img/favicons/favicon-32x32.png')
    link(href='/plugins/switchery/switchery.min.css' rel='stylesheet')
    link(href='/plugins/morris/morris.css' rel='stylesheet')
    link(href='/plugins/switchery/switchery.min.css' rel='stylesheet')
    link(href='/plugins/jquery-circliful/css/jquery.circliful.css' rel='stylesheet' type='text/css')
    link(href='/assets/css/bootstrap.min.css' rel='stylesheet' type='text/css')
    link(href='/assets/css/icons.css' rel='stylesheet' type='text/css')
    link(href='/assets/css/style.css' rel='stylesheet' type='text/css')
    script(src='/assets/js/modernizr.min.js')
    link(rel='stylesheet' href='/styles/Style/chosen.css')
    link(rel='stylesheet' href='/styles/Style/cardhover.css')
    // Important for searhable dropdwn
    link(rel='stylesheet' href='/styles/users/css/style.css')
    // load fontawesome cdn
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css' integrity='sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7' crossorigin='anonymous')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css' integrity='sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==' crossorigin='anonymous' referrerpolicy='no-referrer')
    // load fontawesome cdn
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css' integrity='sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7' crossorigin='anonymous')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css' integrity='sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==' crossorigin='anonymous' referrerpolicy='no-referrer')
    // include header.html
    // source-- https://stackoverflow.com/questions/18712338/make-header-and-footer-files-to-be-included-in-multiple-html-pages
    script(src='/javascript/js_header/jquery-3.3.1.js')
    script.
      $(function () {
      $("#header").load("/assets/js_header/headerManager.html");
      $("#footer").load("/assets/js_header/footer.html");
      });
  body.fixed-left(onload='myFunction()')
    // Begin page
    #wrapper
      // Top Bar Start
      .topbar
        // LOGO
        .topbar-left
          .text-center
            a.logo(href='/managerDash')
              i.mdi.mdi-radar
              span
                | Karibu
                | groceries
        nav.navbar-custom
          ul.list-inline.float-right.mb-0
            li.list-inline-item.notification-list.hide-phone
              a#btn-fullscreen.nav-link.waves-light.waves-effect(href='#')
                i.mdi.mdi-crop-free.noti-icon
            li.list-inline-item.notification-list
              a.nav-link.right-bar-toggle.waves-light.waves-effect(href='#')
                i.mdi.mdi-dots-horizontal.noti-icon 
            li#notifylogo.list-inline-item.dropdown.notification-list
              a.nav-link.dropdown-toggle.arrow-none.waves-light.waves-effect(data-toggle='dropdown' href='#' role='button' aria-haspopup='false' aria-expanded='false')
                i.mdi.mdi-bell.noti-icon
                span.badge.badge-pink.noti-icon-badge 1
              .dropdown-menu.dropdown-menu-right.dropdown-arrow.dropdown-menu-lg(aria-labelledby='Preview')
                // item
                .dropdown-item.noti-title
                  h5.font-16
                    span.badge.badge-danger.float-right 1
                    | Running out of stocks! &nbsp;
                    a(href='/add_purch/') +
                      i.fa-solid.fa-cash-register
                // item
                a.dropdown-item.notify-item(href='javascript:void(0);')
                  .notify-icon.bg-success
                    i.mdi.mdi-comment-account
                  p.notify-details
                    | Dear #{username}
                    small.text-muted The stock level is below 100kgs.
                    small.text-muted Current stock balance is: 
                    small(style='color:blue; font-weight: 200; font-size:18px') #{totalPurchase.totalPurchTonnage - totalSales.totalSoldTonnage - totalCreditSales.totalCreditTonn}.toLocaleString() Kgs
            li.list-inline-item.dropdown.notification-list
              a.nav-link.dropdown-toggle.waves-effect.waves-light.nav-user(data-toggle='dropdown' href='#' role='button' aria-haspopup='false' aria-expanded='false')
                img.rounded-circle(src='/assets/images/pendeza_logo.png' alt='user')
              .dropdown-menu.dropdown-menu-right.profile-dropdown(aria-labelledby='Preview')
                // item
                .dropdown-item.noti-title
                  h6.text-overflow
                    small
                      | Welcome ! 
                      asp:label#Label1(runat='server' text='Label')
                // item
                a.dropdown-item.notify-item(href='javascript:void(0);')
                  i.mdi.mdi-account
                  span Profile
                // item
                a.dropdown-item.notify-item(href='javascript:void(0);')
                  i.mdi.mdi-settings
                  span Settings
                // item
                a.dropdown-item.notify-item(href='javascript:void(0);')
                  i.mdi.mdi-lock-open
                  span Lock Screen
                // item
                a.dropdown-item.notify-item(href='/logout/')
                  i.mdi.mdi-logout
                  span Logout
          ul.list-inline.menu-left.mb-0
            li.float-left
              button.button-menu-mobile.open-left.waves-light.waves-effect
                i.mdi.mdi-menu
            li.hide-phone.app-search
              //
                <form role="search" class="">
                <input type="text" placeholder="Search..." class="form-control">
                <a href="#"><i class="fa fa-search"></i></a>
                </form>
      // Top Bar End
      // ========== Left Sidebar Start ========== Pro
      #header.left.side-menu
      // ========== Left Sidebar End ========== Pro
      // Start right Content here
      // ==============================================================
      .content-page
        // Start content
        .content
          .container-fluid
            // Left Sidebar End
            // ==============================================================
            // Page-Title
            .row
              .col-sm-12
                .page-title-box
                  h4.page-title
                    | Welcome ! 
                    b #{username} |
                  ol.breadcrumb.float-right
                    | Branch:&nbsp;  
                    b #{branch} &nbsp;|&nbsp;               
                    | Role:&nbsp;  
                    b #{role} &nbsp;|&nbsp;
                    | Email:&nbsp;  
                    b #{email}
                    li.breadcrumb-item
                      a(href='/managerDash')
                    li.breadcrumb-item.active
                      a(href='/managerDash') Manager Dashboard
                  .clearfix
            form#regform.form
              .row
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#40E0D0')
                    .circliful-chart(data-dimension='100' data-width='5' data-fontsize='14' data-percent='100' data-fgcolor='#f76397' data-bgcolor='#ebeff2')
                    h3.text-#FFBF00.m-t-10
                      span.counter(style='color:white; font-weight: 900; font-size:24px') #{totalPurchase.totalPurchTonnage}
                      | (kgs)
                    p.text-white.text-nowrap.m-b-10 Tonnage Purchased
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#40E0D0')
                    .circliful-chart(data-dimension='100' data-width='5' data-fontsize='14' data-percent='100' data-fgcolor='#f76397' data-bgcolor='#ebeff2')
                    h3.text-#FFBF00.m-t-10
                      span.counter(style='color:white; font-weight: 900; font-size:24px') #{totalSales.totalSoldTonnage} 
                      | (kgs)
                    p.text-white.text-nowrap.m-b-10 Tonnage Sold on cash
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#40E0D0')
                    .circliful-chart(data-dimension='100' data-width='5' data-fontsize='14' data-percent='100' data-fgcolor='#f76397' data-bgcolor='#ebeff2')
                    h3.text-#FFBF00.m-t-10
                      span.counter(style='color:white; font-weight: 900; font-size:24px') #{totalCreditSales.totalCreditTonn}
                      | (kgs)
                    p.text-white.text-nowrap.m-b-10 Tonnage Sold on credit                                      
              // end row
              .row
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#FFA07A')
                    h3.text-white.m-t-10
                      | UgX: 
                      span.counter #{totalPurchase.totalCost}
                    p.text-black.text-nowrap.m-b-10 TOTAL PURCHASES
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#FFA07A')
                    h3.text-white.m-t-10
                      | UgX: 
                      span.counter #{totalSales.totalAmt}
                    p.text-black.text-nowrap.m-b-10 TOTAL CASH SALES
                .col-sm-4.col-lg-4
                  .widget-simple-chart.text-right.card-box(style='background-color:#FFA07A')
                    h3.text-white.m-t-10
                      | UgX: 
                      span.counter #{totalCreditSales.totalCreditAmt}
                    p.text-black.text-nowrap.m-b-10 TOTAL CREDIT SALES       
                .col-sm-6.col-lg-6
                  .widget-simple-chart.text-right.card-box(style='background-color:#40E0D0')
                    h3.text-white.m-t-10 
                      span.counter #{totalPurchase.totalPurchTonnage - totalSales.totalSoldTonnage - totalCreditSales.totalCreditTonn}
                      | (kgs) 
                    p.text-black.text-nowrap.m-b-10 Stock balance:    
                .col-sm-6.col-lg-6
                  .widget-simple-chart.text-right.card-box(style='background-color:#40E0D0')
                    h3.text-white.m-t-10 UgX: &nbsp;
                      span.counter #{totalPurchase.totalCost - totalSales.totalAmt - totalCreditSales.totalCreditAmt}
                    input#stockbal(type='text' name='stockbal' style='width: 40%; border: none;' value=totalPurchase.totalPurchTonnage - totalSales.totalSoldTonnage - totalCreditSales.totalCreditTonn hidden)       
                    p.text-black.text-nowrap.m-b-10 Stock value     
          .row
            footer.footer
          #footer
          // End footer
          // END wrapper
          // Plugins
          script(src='/assets/js/jquery.min.js')
          script(src='/assets/js/popper.min.js')
          // Popper for Bootstrap
          script(src='/assets/js/bootstrap.min.js')
          script(src='/assets/js/detect.js')
          script(src='/assets/js/fastclick.js')
          script(src='/assets/js/jquery.slimscroll.js')
          script(src='/assets/js/jquery.blockUI.js')
          script(src='/assets/js/waves.js')
          script(src='/assets/js/wow.min.js')
          script(src='/assets/js/jquery.nicescroll.js')
          script(src='/assets/js/jquery.scrollTo.min.js')
          script(src='/plugins/switchery/switchery.min.js')
          script(src='/assets/js/jquery.core.js')
          script(src='/assets/js/modernizr.min.js')
          // Counter Up
          script(src='/plugins/waypoints/lib/jquery.waypoints.min.js')
          script(src='/plugins/counterup/jquery.counterup.min.js')
          // circliful Chart
          script(src='/plugins/jquery-circliful/js/jquery.circliful.min.js')
          script(src='/plugins/jquery-sparkline/jquery.sparkline.min.js')
          // skycons
          script(src='/plugins/skyicons/skycons.min.js' type='text/javascript')
          // Page js
          script(src='/assets/pages/jquery.dashboard.js')
          script(type='text/javascript').
            jQuery(document).ready(function ($) {
            $('.counter').counterUp({
            delay: 100,
            time: 1200
            });
            $('.circliful-chart').circliful();
            });
          script.
            var resizefunc = [];
          // Begin Important for searhable dropdwn
          script(src='/javascript/Scripts/chosen.jquery.js' type='text/javascript')
          script(type='text/javascript').
            $(".chzn-select").chosen(); $(".chzn-select-deselect").chosen({ allow_single_deselect: true });
          // End Important for searhable dropdwn
          script.
            $(document).on('click', 'button.deleteRow', function (event) {
            $(this).closest("tr").remove();
            });
          // for the form popup
          script.
            function openForm() {
            document.getElementById("myForm").style.display = "block";
            }
            function closeForm() {
            document.getElementById("myForm").style.display = "none";
            }
          script.
            function myFunction() {
            var result = document.getElementById("stockbal").value;
            if (parseInt(result) < 100)
            {
                //- alert("greater than or equal to 1000");
                $("#notifylogo").show();
            } else {
                //- alert("less than 1000");
                $("#notifylogo").hide();
            }
            }